
CREATE DATABASE marienutrition;

USE marienutrition;



CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    prenom VARCHAR(50),
    nom VARCHAR(50),
    age INT,
    poids FLOAT,
    adresse VARCHAR(100),
    telephone VARCHAR(15),
    email VARCHAR(50),
    genre VARCHAR(10),
    activite VARCHAR(50),
    password VARCHAR(255)
);

CREATE TABLE infoNutrition (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    imc FLOAT NOT NULL,
    poidsInitial FLOAT NOT NULL,
    depenseCal FLOAT NOT NULL,
    tauxMasseGrasse FLOAT NOT NULL,
    objectifCal FLOAT NOT NULL,
    glucides FLOAT NOT NULL,
    lipides FLOAT NOT NULL,
    proteines FLOAT NOT NULL,
    poidsAtteindre FLOAT NOT NULL,
    date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

CREATE TABLE files (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    filename VARCHAR(255) NOT NULL,
    filepath VARCHAR(255) NOT NULL,
    uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE IF NOT EXISTS recette (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT NOT NULL,
  post_id INT NOT NULL,
  is_favorite TINYINT(1) NOT NULL,
  UNIQUE(user_id, post_id),
  FOREIGN KEY (user_id) REFERENCES users(id)
);
